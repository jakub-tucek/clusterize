# defines iterations in given order
iterations:
  - type: ARRAY # will iterate over values given in array
    name: VICINITY_TYPE
    values: [10, 20, 30]

  - type: INT_RANGE # will iterate over given integer range
    name: MIN_TRANSL
    from: 1
    to: 1
    step: 1
    stepOperation: PLUS

  - type: ARRAY
    name: ADDED_LAYERS
    values: ['[10, 20, 30]', '[20, 20]']

  - type: INT_RANGE
    name: SUB_IMG_IDX
    from: 1
    to: 1
    step: 1
    stepOperation: PLUS

  - type: INT_RANGE
    name: RUN_ID
    from: 1
    to: 1
    step: 1
    stepOperation: PLUS

general:
  #  metadataStoragePath: 'dockershared/metadataStorage'
  storagePath: 'dockershared/storage' #usually storage
  sourcesPath: './src/test/resources/sources'
  maxResubmits: 3
  variables:
  dependents:
    - name: MAX_TRANSL
      dependentVarName: VICINITY_TYPE
      modifier: '+1'

taskType:
  type: PYTHON # type of runner
  command: |
    from batch_test_original import main; main('.', $IN_DIR)

resources:
  profile: 'CUSTOM'
  modules:
    - tensorflow-1.7.1-cpu-python3